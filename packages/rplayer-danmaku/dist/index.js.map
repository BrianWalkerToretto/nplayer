{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external {\"amd\":\"rplayer\",\"commonjs\":\"rplayer\",\"commonjs2\":\"rplayer\",\"root\":\"RPlayer\"}","webpack://[name]/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://[name]/./node_modules/css-loader/dist/runtime/api.js","webpack://[name]/./packages/rplayer-danmaku/src/icons/dan.svg","webpack://[name]/./packages/rplayer-danmaku/src/scss/index.scss?6ebd","webpack://[name]/./packages/rplayer-danmaku/src/scss/index.scss","webpack://[name]/./packages/rplayer-danmaku/src/ts/dan.ts","webpack://[name]/./packages/rplayer-danmaku/src/ts/ui.ts","webpack://[name]/./packages/rplayer-danmaku/src/ts/danmaku.ts","webpack://[name]/./packages/rplayer-danmaku/src/ts/options.ts","webpack://[name]/./packages/rplayer-danmaku/src/ts/index.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","m","memo","isOldIE","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","index","obj","css","media","sourceMap","references","updater","push","style","update","remove","styleIndex","singleton","singletonCounter","insertStyleElement","applyToSingletonTag","bind","setAttribute","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","styleSheet","cssText","firstChild","removeChild","appendChild","createTextNode","parentNode","removeStyleElement","newObj","addStyle","nonce","createElement","attributes","Object","keys","forEach","key","insert","Error","textStore","replaceText","replacement","filter","join","cssNode","childNodes","insertBefore","lastIdentifiers","newList","prototype","toString","call","newLastIdentifiers","_i","_index","splice","useSourceMap","this","map","content","cssMapping","sourceMapping","base64","data","toComment","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","modules","mediaQuery","dedupe","alreadyImportedModules","api","__esModule","default","exported","locals","___CSS_LOADER_API_IMPORT___","danmaku","tunnel","speed","showFrame","_width","canRecycle","dom","utils","newElement","reset","measure","width","rect","getBoundingClientRect","height","updateTunnelHeight","playerWidth","d","s","innerText","text","color","fontFamily","isMe","classList","add","type","updateVertical","Math","max","fontSize","player","opts","scrollFrame","updateX","right","show","tunnelHeight","transform","hidden","hide","staticFrame","recycle","top","bottom","destroy","onOnOffChange","onTrayClick","tray","UI","trayActiveCls","popover","onTrayHide","Tray","label","icons","svgToDom","onClick","Popover","onHide","mount","initPopover","controls","addTray","render","newSettingItem","newSettingLabel","cls","div","onOff","onOffLabel","onOffSwitch","Switch","onChange","block","blockLabel","blockAction","scroll","Checkbox","opacity","opacityLabel","opacitySlider","Slider","area","areaLabel","areaSlider","font","fontLabel","fontSlider","other","unlimited","bt","merge","resetBtn","append","showing","running","remain","current","last","pool","prevCurrentTime","onPlayerSeeked","clear","items","updateTunnel","h","maxLen","recycleDan","undefined","pause","cancelAnimationFrame","timer","load","fire","clean","requestAnimationFrame","run","playing","isNum","blockTypes","updateOpacity","updateArea","updateFontSize","install","on","Events","PAUSE","LOADING_SHOW","LOADING_HIDE","PLAY","ENDED","PLAYER_RESIZE","SEEKED","contains","once","MOUNTED","ui","clamp","getFontSize","updateScrollFrame","updateStaticFrame","dan","toggleBlockType","includes","x","send","Array","isArray","getDan","pop","getShortestTunnel","Infinity","l","invisibleLength","force","time","currentTime","toShow","c","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","ns","create","n","object","property","hasOwnProperty","p","moduleId"],"mappings":"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","file":"rplayer-danmaku/dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"rplayer\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"RPlayerDanmaku\", [\"rplayer\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RPlayerDanmaku\"] = factory(require(\"rplayer\"));\n\telse\n\t\troot[\"RPlayerDanmaku\"] = factory(root[\"RPlayer\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 22);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","module.exports = \"<svg viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M8.528 21.135v2.305H6.207v-2.305h2.321m4.642 0v2.305h-2.321v-2.305h2.321m4.641 0v2.305h-2.32v-2.305h2.32m3.482-2.305H2.726a2.312 2.312 0 0 1-2.321-2.305V2.696A2.314 2.314 0 0 1 2.726.391h18.567a2.314 2.314 0 0 1 2.321 2.305v13.829a2.313 2.313 0 0 1-2.321 2.305m-10.444-8.067H8.528v2.305h2.321v-2.305m9.283 0H13.17v2.305h6.962v-2.305M6.207 6.153H3.886v2.305h2.321V6.153m13.925 0H8.528v2.305h11.604V6.153z\\\"></path></svg>\"","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".rplayer_dan{position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;overflow:hidden;font-family:SimHei,Microsoft JhengHei,Arial,Helvetica,sans-serif}.rplayer_dan_d{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;will-change:transform;font-weight:700;line-height:1.125;color:#fff;text-shadow:#000 1px 1px 2px,#000 0 0 1px}.rplayer_dan_d-me{outline:1px solid currentColor;z-index:1}.rplayer_dan_d-center{left:50%;transform:translateX(-50%)}.rplayer_dan_tray-active{background:#448aff!important;background:var(--rplayer-primary)!important}.rplayer_dan_tray-active .rplayer_tray_tip{opacity:0!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","import { Item } from './options';\nimport RPlayer from 'rplayer';\nimport Danmaku from '.';\n\nexport default class Dan {\n  private readonly danmaku: Danmaku;\n  readonly dom: HTMLElement;\n  type: string;\n  private tunnel: number;\n  private length: number;\n  private showFrame = 0;\n  private _width = 0;\n  speed = 0;\n  canRecycle = false;\n\n  constructor(\n    danmaku: Danmaku,\n    item: Item,\n    tunnel: number,\n    length?: number,\n    speed?: number\n  ) {\n    this.danmaku = danmaku;\n    this.dom = RPlayer.utils.newElement('rplayer_dan_d');\n    danmaku.dom.appendChild(this.dom);\n    this.reset(item, tunnel, length, speed);\n  }\n\n  get width(): number {\n    if (this._width) return this._width;\n    this._width = this.measure().width;\n    return this._width;\n  }\n\n  get invisibleLength(): number {\n    return this.width + this.length;\n  }\n\n  private measure(): DOMRect {\n    const rect = this.dom.getBoundingClientRect();\n    if (rect.height) this.danmaku.updateTunnelHeight(rect.height + 1);\n    return rect;\n  }\n\n  reset(item: Item, tunnel: number, length?: number, speed?: number): this {\n    this.dom.innerText = item.text;\n    if (item.color) this.dom.style.color = item.color;\n    if (item.fontFamily) this.dom.style.fontFamily = item.color;\n    if (item.isMe) this.dom.classList.add('rplayer_dan_d-me');\n    this.type = item.type;\n    this.tunnel = tunnel;\n\n    this.updateVertical();\n\n    if (!this.type || this.type === 'scroll') {\n      this.length = Math.max(length, 0) + this.danmaku.fontSize;\n\n      if (length >= 0 && speed) {\n        this.speed = speed;\n      } else {\n        const playerWidth = this.danmaku.player.rect.width;\n        const d = playerWidth + this.length;\n        this.speed = (this.width + d) / this.danmaku.opts.scrollFrame;\n\n        if (speed && length < 0) {\n          const s = (d * speed) / (playerWidth + length);\n          if (s < this.speed) this.speed = s;\n        }\n      }\n\n      this.updateX();\n      this.dom.style.right = `-${this.width}px`;\n    } else {\n      this.dom.classList.add('rplayer_dan_d-center');\n    }\n    this.canRecycle = false;\n\n    this.show();\n\n    return this;\n  }\n\n  updateVertical(): void {\n    this.dom.style[this.type === 'bottom' ? 'bottom' : 'top'] =\n      this.tunnel * this.danmaku.tunnelHeight + 'px';\n  }\n\n  private updateX(): void {\n    this.dom.style.transform = `translateX(${this.length}px)`;\n  }\n\n  private show(): void {\n    this.dom.hidden = false;\n  }\n\n  private hide(): void {\n    this.dom.hidden = true;\n  }\n\n  update(): void {\n    if (this.canRecycle) return;\n    if (this.type === 'top' || this.type === 'bottom') {\n      if (this.showFrame > this.danmaku.opts.staticFrame) {\n        this.canRecycle = true;\n        this.hide();\n        return;\n      }\n      this.showFrame++;\n    } else {\n      if (-this.length >= this.danmaku.player.rect.width + this.width) {\n        this.canRecycle = true;\n        this.hide();\n        return;\n      }\n      this.length -= this.speed;\n      this.updateX();\n    }\n  }\n\n  recycle(): void {\n    this.canRecycle = true;\n    this.showFrame = 0;\n    this._width = 0;\n    this.speed = 0;\n    this.dom.style.color = '';\n    this.dom.style.fontFamily = '';\n    this.dom.style.right = '';\n    this.dom.style.top = '';\n    this.dom.style.bottom = '';\n    this.dom.style.transform = '';\n    this.dom.classList.remove('rplayer-dan-me');\n    this.dom.classList.remove('rplayer_dan_d-center');\n    this.hide();\n  }\n\n  destroy(): void {\n    this.hide();\n    if (this.dom.parentNode) {\n      this.dom.parentNode.removeChild(this.dom);\n    }\n    this.canRecycle = true;\n  }\n}\n","import Danmaku from '.';\nimport RPlayer from 'rplayer';\nimport dan from '../icons/dan.svg';\n\nexport default class UI {\n  private static readonly trayActiveCls = 'rplayer_dan_tray-active';\n  private readonly tray: InstanceType<typeof RPlayer.Tray>;\n  private readonly popover: InstanceType<typeof RPlayer.Popover>;\n  private readonly danmaku: Danmaku;\n  private readonly dom: HTMLElement;\n\n  constructor(danmaku: Danmaku) {\n    this.danmaku = danmaku;\n    this.dom = RPlayer.utils.newElement();\n\n    this.tray = new RPlayer.Tray({\n      label: '弹幕',\n      icons: [RPlayer.utils.svgToDom(dan, 'rplayer_dan_icon')],\n      onClick: this.onTrayClick,\n    });\n\n    this.popover = new RPlayer.Popover({\n      player: this.danmaku.player,\n      onHide: this.onTrayHide,\n    });\n    this.popover.mount(this.tray.dom);\n\n    this.initPopover();\n\n    this.danmaku.player.controls.addTray(this.tray.dom, 3);\n  }\n\n  private onOnOffChange = (): void => {};\n\n  private onTrayClick = (): void => {\n    this.tray.dom.classList.add(UI.trayActiveCls);\n    this.popover.show();\n  };\n\n  private onTrayHide = (): void => {\n    this.tray.dom.classList.remove(UI.trayActiveCls);\n  };\n\n  render(): void {}\n\n  private newSettingItem(): HTMLElement {\n    return RPlayer.utils.newElement();\n  }\n\n  private newSettingLabel(text: string, cls?: string): HTMLElement {\n    const div = RPlayer.utils.newElement();\n    div.innerText = text;\n    if (cls) div.classList.add(cls);\n    return div;\n  }\n\n  private initPopover(): void {\n    const onOff = this.newSettingItem();\n    const onOffLabel = this.newSettingLabel('弹幕');\n    const onOffSwitch = new RPlayer.Switch({\n      onChange: this.onOnOffChange,\n    });\n    onOff.appendChild(onOffLabel);\n    onOff.appendChild(onOffSwitch.dom);\n\n    const block = this.newSettingItem();\n    const blockLabel = this.newSettingLabel('按类型屏蔽');\n    const blockAction = RPlayer.utils.newElement();\n    const scroll = new RPlayer.Checkbox({\n      label: '滚动',\n    });\n    const top = new RPlayer.Checkbox({\n      label: '顶部',\n    });\n    const bottom = new RPlayer.Checkbox({\n      label: '底部',\n    });\n    const color = new RPlayer.Checkbox({\n      label: '彩色',\n    });\n    blockAction.appendChild(scroll.dom);\n    blockAction.appendChild(top.dom);\n    blockAction.appendChild(bottom.dom);\n    blockAction.appendChild(color.dom);\n    block.appendChild(blockLabel);\n    block.appendChild(blockAction);\n\n    const opacity = this.newSettingItem();\n    const opacityLabel = this.newSettingLabel('不透明度');\n    const opacitySlider = new RPlayer.Slider({});\n    opacity.appendChild(opacityLabel);\n    opacity.appendChild(opacitySlider.dom);\n\n    const area = this.newSettingItem();\n    const areaLabel = this.newSettingLabel('显示区域');\n    const areaSlider = new RPlayer.Slider({});\n    area.appendChild(areaLabel);\n    area.appendChild(areaSlider.dom);\n\n    const font = this.newSettingItem();\n    const fontLabel = this.newSettingLabel('字体大小');\n    const fontSlider = new RPlayer.Slider({});\n    font.appendChild(fontLabel);\n    font.appendChild(fontSlider.dom);\n\n    const other = this.newSettingItem();\n    const unlimited = new RPlayer.Checkbox({ label: '不限弹幕' });\n    const bt = new RPlayer.Checkbox({ label: '从下到上' });\n    const merge = new RPlayer.Checkbox({ label: '合并重复' });\n    other.appendChild(unlimited.dom);\n    other.appendChild(bt.dom);\n    other.appendChild(merge.dom);\n\n    const reset = this.newSettingItem();\n    const resetBtn = this.newSettingLabel('恢复默认设置');\n    reset.appendChild(resetBtn);\n\n    this.popover.append(onOff);\n    this.popover.append(block);\n    this.popover.append(opacity);\n    this.popover.append(area);\n    this.popover.append(font);\n    this.popover.append(other);\n    this.popover.append(reset);\n  }\n}\n","import RPlayer from 'rplayer';\nimport processOpts, { Item, DanmakuOpts } from './options';\nimport Dan from './dan';\nimport UI from './ui';\n\nexport default class Danmaku {\n  ui: UI;\n  readonly dom: HTMLElement;\n  readonly opts: DanmakuOpts;\n  player: RPlayer;\n  private tunnel = 0;\n  fontSize: number;\n  private opacity = 1;\n  tunnelHeight = 0;\n  private area: number;\n  private unlimited = false;\n  private showing = false;\n  private running = false;\n  private timer: number;\n  private remain: Item[] = [];\n  private current: Dan[] = [];\n  private last: Dan[] = [];\n  private pool: Dan[] = [];\n  private top: Dan[] = [];\n  private bottom: Dan[] = [];\n  private prevCurrentTime = 0;\n\n  constructor(opts: DanmakuOpts) {\n    this.dom = RPlayer.utils.newElement('rplayer_dan');\n    this.opts = processOpts(opts);\n\n    const items = this.opts.items;\n    this.opts.items = [];\n    this.push(items);\n\n    this.updateOpacity(this.opts.opacity);\n    this.updateArea(this.opts.area);\n    this.updateFontSize(this.opts.fontSize);\n  }\n\n  install(player: RPlayer): void {\n    this.player = player;\n    this.player.appendChild(this.dom);\n\n    player.on(RPlayer.Events.PAUSE, this.pause);\n    player.on(RPlayer.Events.LOADING_SHOW, this.pause);\n    player.on(RPlayer.Events.LOADING_HIDE, this.update);\n    player.on(RPlayer.Events.PLAY, this.update);\n    player.on(RPlayer.Events.ENDED, this.pause);\n    player.on(RPlayer.Events.PLAYER_RESIZE, this.updateTunnel);\n    player.on(RPlayer.Events.SEEKED, this.onPlayerSeeked);\n\n    if (document.contains(this.player.dom)) {\n      this.run();\n    } else {\n      player.once(RPlayer.Events.MOUNTED, this.run);\n    }\n\n    this.ui = new UI(this);\n  }\n\n  private onPlayerSeeked = (): void => {\n    this.clear();\n    this.remain = this.opts.items;\n  };\n\n  updateTunnelHeight(h: number): void {\n    if (h && this.tunnelHeight < h) {\n      this.tunnelHeight = h;\n      this.updateTunnel();\n    }\n  }\n\n  private updateTunnel = (): void => {\n    if (!this.player) return;\n\n    const h = this.player.rect.height;\n    if (!h) return;\n\n    this.tunnel = ((this.area * h) / this.tunnelHeight) | 0;\n\n    const maxLen = Math.max(\n      this.last.length,\n      this.top.length,\n      this.bottom.length\n    );\n\n    if (maxLen > this.tunnel) {\n      for (let i = this.tunnel; i < maxLen; i++) {\n        this.recycleDan(this.last[i]);\n        this.recycleDan(this.top[i]);\n        this.recycleDan(this.bottom[i]);\n        this.last[i] = undefined;\n        this.top[i] = undefined;\n        this.bottom[i] = undefined;\n      }\n    }\n\n    this.current.forEach((item) => item.updateVertical());\n\n    if (this.tunnel < 1) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  updateArea(area: number): void {\n    if (!RPlayer.utils.isNum(area)) return;\n    this.unlimited = area > 1;\n    this.area = RPlayer.utils.clamp(area);\n    this.updateTunnel();\n  }\n\n  updateOpacity(opacity: number): void {\n    if (!RPlayer.utils.isNum(opacity)) return;\n    this.opacity = RPlayer.utils.clamp(opacity);\n    this.dom.style.opacity = this.opacity.toString();\n  }\n\n  updateFontSize(fontSize: number): void {\n    if (!RPlayer.utils.isNum(fontSize)) {\n      this.fontSize = this.getFontSize();\n    } else {\n      this.fontSize = fontSize;\n    }\n    if (!this.tunnelHeight) this.tunnelHeight = this.fontSize;\n    this.updateTunnel();\n    this.dom.style.fontSize = this.fontSize + 'px';\n  }\n\n  updateScrollFrame(scrollFrame?: number): void {\n    if (scrollFrame) this.opts.scrollFrame = scrollFrame;\n  }\n\n  updateStaticFrame(staticFrame?: number): void {\n    if (staticFrame) this.opts.staticFrame = staticFrame;\n  }\n\n  private getFontSize(): number {\n    const [w] = RPlayer.utils.getClientWH();\n    if (w < 769) return 15;\n    return 23;\n  }\n\n  hide(): void {\n    this.showing = false;\n    this.pause();\n    this.clear();\n  }\n\n  show(): void {\n    if (this.showing) return;\n    this.showing = true;\n    this.pause();\n    this.update();\n  }\n\n  clear(): void {\n    this.current.forEach((dan) => this.recycleDan(dan));\n    this.current = [];\n    this.last = [];\n    this.top = [];\n    this.bottom = [];\n  }\n\n  toggleBlockType(type: string): void {\n    if (!type) return;\n    if (this.opts.blockTypes.includes(type as any)) {\n      this.opts.blockTypes = this.opts.blockTypes.filter((x) => x !== type);\n      this.remain = this.opts.items;\n    } else {\n      this.opts.blockTypes.push(type as any);\n      this.remain = this.remain.filter((x) => x.type !== type);\n      this.current = this.current.filter((x) => {\n        if (x.type === type) {\n          this.recycleDan(x);\n          return false;\n        }\n\n        return true;\n      });\n    }\n  }\n\n  send(item: Item): void {\n    item.isMe = true;\n    this.opts.items.push(item);\n    this.insert(item, 0, true);\n  }\n\n  push(item: Item[] | Item): void {\n    if (!item) return;\n\n    if (Array.isArray(item)) {\n      this.opts.items.push(...item);\n\n      if (this.opts.blockTypes.length) {\n        item = item.filter((x) => !this.opts.blockTypes.includes(x.type));\n      }\n\n      this.remain.push(...item);\n    } else {\n      this.opts.items.push(item);\n      if (!this.opts.blockTypes.includes(item.type)) {\n        this.remain.push(item);\n      }\n    }\n  }\n\n  private getDan(\n    item: Item,\n    tunnel: number,\n    length?: number,\n    speed?: number\n  ): Dan {\n    const dan = this.pool.pop();\n    if (dan) return dan.reset(item, tunnel, length, speed);\n    return new Dan(this, item, tunnel, length, speed);\n  }\n\n  private recycleDan(dan: Dan): void {\n    if (!dan) return;\n    if (this.pool.length > 20) {\n      dan.destroy();\n    } else {\n      dan.recycle();\n      this.pool.push(dan);\n    }\n  }\n\n  private pause = (): void => {\n    cancelAnimationFrame(this.timer);\n    this.running = false;\n  };\n\n  private getShortestTunnel(): [number, number, number] {\n    let length = Infinity;\n    let tunnel = -1;\n    let speed = 0;\n    for (let i = 0; i < this.tunnel; i++) {\n      if (!this.last[i] || this.last[i].canRecycle) return [i, 0, 0];\n      const l = this.last[i].invisibleLength;\n      if (l < length) {\n        length = l;\n        tunnel = i;\n        speed = this.last[i].speed;\n      }\n    }\n    return [tunnel, length, speed];\n  }\n\n  private insert(item: Item, i = 0, force = false): void {\n    if (!item) return;\n    if (item.type === 'top' || item.type === 'bottom') {\n      let tunnel = -1;\n      for (let i = 0; i < this.tunnel; i++) {\n        if (!this[item.type][i] || this[item.type][i].canRecycle) {\n          tunnel = i;\n          break;\n        }\n      }\n      if (tunnel > -1) {\n        this[item.type][tunnel] = this.getDan(item, tunnel);\n        this.current.push(this[item.type][tunnel]);\n        item = undefined;\n      }\n    } else {\n      const [tunnel, length, speed] = this.getShortestTunnel();\n      if (length < 200) {\n        this.last[tunnel] = this.getDan(item, tunnel, length, speed);\n        this.current.push(this.last[tunnel]);\n        item = undefined;\n      }\n    }\n\n    if ((item && this.unlimited) || force) {\n      this.current.push(this.getDan(item, i % this.tunnel, i));\n    }\n  }\n\n  private load(): void {\n    if (\n      !this.showing ||\n      !this.player ||\n      !this.remain.length ||\n      this.tunnel < 1\n    ) {\n      return;\n    }\n\n    const time = this.player.currentTime | 0;\n    if (this.prevCurrentTime === time) return;\n    this.prevCurrentTime = time;\n\n    const remain: Item[] = [];\n    const toShow: Item[] = [];\n\n    this.remain.forEach((x) => {\n      if (x.time === time) {\n        toShow.push(x);\n      } else {\n        remain.push(x);\n      }\n    });\n\n    this.remain = remain;\n    if (!toShow.length) return;\n\n    for (let i = 0, l = toShow.length; i < l; i++) {\n      const item = toShow[i];\n      if (!item || !item.text) break;\n      this.insert(item, i);\n    }\n  }\n\n  private fire(): void {\n    this.current.forEach((dan) => dan.update());\n  }\n\n  private clean(): void {\n    const current: Dan[] = [];\n    this.current.forEach((dan) => {\n      if (dan.canRecycle) {\n        this.recycleDan(dan);\n      } else {\n        current.push(dan);\n      }\n    });\n    this.current = current;\n\n    for (let i = 0; i < this.tunnel; i++) {\n      if (this.last[i] && this.last[i].canRecycle) this.last[i] = undefined;\n      if (this.top[i] && this.top[i].canRecycle) this.top[i] = undefined;\n      if (this.bottom[i] && this.bottom[i].canRecycle) {\n        this.bottom[i] = undefined;\n      }\n    }\n  }\n\n  private update = (): void => {\n    if (this.running) return;\n    this.running = true;\n    this.render();\n  };\n\n  private render = (): void => {\n    this.load();\n    this.fire();\n    this.clean();\n\n    if (!this.current.length && !this.remain.length) return this.hide();\n    this.timer = requestAnimationFrame(this.render);\n  };\n\n  private run = (): void => {\n    this.updateTunnel();\n    this.show();\n    if (!this.player.playing) this.pause();\n  };\n}\n","import RPlayer from 'rplayer';\n\nexport interface Item {\n  text: string;\n  time: number;\n  color?: string;\n  fontFamily?: string;\n  type?: 'top' | 'bottom' | 'scroll';\n  isMe?: boolean;\n}\n\nexport interface DanmakuOpts {\n  items?: Item[];\n  area?: number;\n  opacity?: number;\n  fontSize?: number;\n  staticFrame?: number;\n  scrollFrame?: number;\n  blockTypes?: Item['type'][];\n}\n\nexport default function processOpts(opts: DanmakuOpts): DanmakuOpts {\n  opts.area = RPlayer.utils.isNum(opts.area) ? opts.area : 0.5;\n  opts.opacity = opts.opacity || 1;\n  opts.items = opts.items || [];\n  opts.staticFrame = opts.staticFrame || 300;\n  opts.scrollFrame = opts.scrollFrame || 500;\n  opts.blockTypes = opts.blockTypes || [];\n  return opts;\n}\n","import Danmaku from './danmaku';\nimport '../scss/index.scss';\n\nexport default Danmaku;\n"],"sourceRoot":""}