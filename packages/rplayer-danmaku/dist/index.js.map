{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external {\"amd\":\"rplayer\",\"commonjs\":\"rplayer\",\"commonjs2\":\"rplayer\",\"root\":\"RPlayer\"}","webpack://[name]/./packages/rplayer-danmaku/src/scss/index.scss?6ebd","webpack://[name]/./packages/rplayer-danmaku/src/scss/index.scss","webpack://[name]/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://[name]/./packages/rplayer-danmaku/src/ts/dan.ts","webpack://[name]/./packages/rplayer-danmaku/src/ts/danmaku.ts","webpack://[name]/./packages/rplayer-danmaku/src/ts/options.ts","webpack://[name]/./packages/rplayer-danmaku/src/ts/index.ts","webpack://[name]/./node_modules/css-loader/dist/runtime/api.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","m","api","content","__esModule","default","i","options","exported","locals","___CSS_LOADER_API_IMPORT___","push","memo","isOldIE","Boolean","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","length","modulesToDom","list","idCountMap","identifiers","item","id","base","count","concat","index","obj","css","media","sourceMap","references","updater","style","update","remove","styleIndex","singleton","singletonCounter","insertStyleElement","applyToSingletonTag","bind","setAttribute","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","styleSheet","cssText","firstChild","removeChild","appendChild","createTextNode","parentNode","removeStyleElement","newObj","addStyle","nonce","createElement","attributes","Object","keys","forEach","key","insert","Error","textStore","replaceText","replacement","filter","join","cssNode","childNodes","insertBefore","lastIdentifiers","newList","prototype","toString","call","newLastIdentifiers","_i","_index","splice","danmaku","tunnel","speed","showFrame","_width","canRecycle","this","dom","utils","newElement","reset","measure","width","rect","getBoundingClientRect","height","updateTunnelHeight","playerWidth","d","s","innerText","text","color","fontFamily","isMe","classList","add","type","updateVertical","Math","max","fontSize","player","opts","scrollFrame","updateX","right","show","tunnelHeight","transform","hidden","hide","staticFrame","recycle","top","bottom","destroy","opacity","unlimited","showing","running","remain","current","last","pool","prevCurrentTime","onPlayerSeeked","clear","items","updateTunnel","h","area","maxLen","recycleDan","undefined","pause","cancelAnimationFrame","timer","render","load","fire","clean","requestAnimationFrame","run","playing","isNum","blockTypes","updateOpacity","updateArea","updateFontSize","install","on","Events","PAUSE","LOADING_SHOW","LOADING_HIDE","PLAY","ENDED","PLAYER_RESIZE","SEEKED","contains","once","MOUNTED","clamp","getFontSize","updateScrollFrame","updateStaticFrame","dan","toggleBlockType","includes","x","send","Array","isArray","getDan","pop","getShortestTunnel","Infinity","l","invisibleLength","force","time","currentTime","toShow","useSourceMap","map","cssMapping","sourceMapping","base64","data","toComment","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","modules","mediaQuery","dedupe","alreadyImportedModules","c","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","ns","create","n","object","property","hasOwnProperty","p","moduleId"],"mappings":"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","file":"rplayer-danmaku/dist/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"rplayer\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"RPlayerDanmaku\", [\"rplayer\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RPlayerDanmaku\"] = factory(require(\"rplayer\"));\n\telse\n\t\troot[\"RPlayerDanmaku\"] = factory(root[\"RPlayer\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--6-1!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/dist/cjs.js!./index.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".rplayer_dan{position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;overflow:hidden;font-family:SimHei,Microsoft JhengHei,Arial,Helvetica,sans-serif}.rplayer_dan_d{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;will-change:transform;font-weight:700;line-height:1.125;color:#fff;text-shadow:#000 1px 1px 2px,#000 0 0 1px}.rplayer_dan_d-me{outline:1px solid currentColor;z-index:1}.rplayer_dan_d-center{left:50%;transform:translateX(-50%)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import { Item } from './options';\nimport RPlayer from 'rplayer';\nimport Danmaku from '.';\n\nexport default class Dan {\n  private readonly danmaku: Danmaku;\n  readonly dom: HTMLElement;\n  type: string;\n  private tunnel: number;\n  private length: number;\n  private showFrame = 0;\n  private _width = 0;\n  speed = 0;\n  canRecycle = false;\n\n  constructor(\n    danmaku: Danmaku,\n    item: Item,\n    tunnel: number,\n    length?: number,\n    speed?: number\n  ) {\n    this.danmaku = danmaku;\n    this.dom = RPlayer.utils.newElement('rplayer_dan_d');\n    danmaku.dom.appendChild(this.dom);\n    this.reset(item, tunnel, length, speed);\n  }\n\n  get width(): number {\n    if (this._width) return this._width;\n    this._width = this.measure().width;\n    return this._width;\n  }\n\n  get invisibleLength(): number {\n    return this.width + this.length;\n  }\n\n  private measure(): DOMRect {\n    const rect = this.dom.getBoundingClientRect();\n    if (rect.height) this.danmaku.updateTunnelHeight(rect.height + 1);\n    return rect;\n  }\n\n  reset(item: Item, tunnel: number, length?: number, speed?: number): this {\n    this.dom.innerText = item.text;\n    if (item.color) this.dom.style.color = item.color;\n    if (item.fontFamily) this.dom.style.fontFamily = item.color;\n    if (item.isMe) this.dom.classList.add('rplayer_dan_d-me');\n    this.type = item.type;\n    this.tunnel = tunnel;\n\n    this.updateVertical();\n\n    if (!this.type || this.type === 'scroll') {\n      this.length = Math.max(length, 0) + this.danmaku.fontSize;\n\n      if (length >= 0 && speed) {\n        this.speed = speed;\n      } else {\n        const playerWidth = this.danmaku.player.rect.width;\n        const d = playerWidth + this.length;\n        this.speed = (this.width + d) / this.danmaku.opts.scrollFrame;\n\n        if (speed && length < 0) {\n          const s = (d * speed) / (playerWidth + length);\n          if (s < this.speed) this.speed = s;\n        }\n      }\n\n      this.updateX();\n      this.dom.style.right = `-${this.width}px`;\n    } else {\n      this.dom.classList.add('rplayer_dan_d-center');\n    }\n    this.canRecycle = false;\n\n    this.show();\n\n    return this;\n  }\n\n  updateVertical(): void {\n    this.dom.style[this.type === 'bottom' ? 'bottom' : 'top'] =\n      this.tunnel * this.danmaku.tunnelHeight + 'px';\n  }\n\n  private updateX(): void {\n    this.dom.style.transform = `translateX(${this.length}px)`;\n  }\n\n  private show(): void {\n    this.dom.hidden = false;\n  }\n\n  private hide(): void {\n    this.dom.hidden = true;\n  }\n\n  update(): void {\n    if (this.canRecycle) return;\n    if (this.type === 'top' || this.type === 'bottom') {\n      if (this.showFrame > this.danmaku.opts.staticFrame) {\n        this.canRecycle = true;\n        this.hide();\n        return;\n      }\n      this.showFrame++;\n    } else {\n      if (-this.length >= this.danmaku.player.rect.width + this.width) {\n        this.canRecycle = true;\n        this.hide();\n        return;\n      }\n      this.length -= this.speed;\n      this.updateX();\n    }\n  }\n\n  recycle(): void {\n    this.canRecycle = true;\n    this.showFrame = 0;\n    this._width = 0;\n    this.speed = 0;\n    this.dom.style.color = '';\n    this.dom.style.fontFamily = '';\n    this.dom.style.right = '';\n    this.dom.style.top = '';\n    this.dom.style.bottom = '';\n    this.dom.style.transform = '';\n    this.dom.classList.remove('rplayer-dan-me');\n    this.dom.classList.remove('rplayer_dan_d-center');\n    this.hide();\n  }\n\n  destroy(): void {\n    this.hide();\n    if (this.dom.parentNode) {\n      this.dom.parentNode.removeChild(this.dom);\n    }\n    this.canRecycle = true;\n  }\n}\n","import RPlayer from 'rplayer';\nimport processOpts, { Item, DanmakuOpts } from './options';\nimport Dan from './dan';\n\nexport default class Danmaku {\n  readonly dom: HTMLElement;\n  readonly opts: DanmakuOpts;\n  player: RPlayer;\n  private tunnel = 0;\n  fontSize: number;\n  private opacity = 1;\n  tunnelHeight = 0;\n  private area: number;\n  private unlimited = false;\n  private showing = false;\n  private running = false;\n  private timer: number;\n  private remain: Item[] = [];\n  private current: Dan[] = [];\n  private last: Dan[] = [];\n  private pool: Dan[] = [];\n  private top: Dan[] = [];\n  private bottom: Dan[] = [];\n  private prevCurrentTime = 0;\n\n  constructor(opts: DanmakuOpts) {\n    this.dom = RPlayer.utils.newElement('rplayer_dan');\n    this.opts = processOpts(opts);\n\n    const items = this.opts.items;\n    this.opts.items = [];\n    this.push(items);\n\n    this.updateOpacity(this.opts.opacity);\n    this.updateArea(this.opts.area);\n    this.updateFontSize(this.opts.fontSize);\n  }\n\n  install(player: RPlayer): void {\n    this.player = player;\n    this.player.appendChild(this.dom);\n\n    player.on(RPlayer.Events.PAUSE, this.pause);\n    player.on(RPlayer.Events.LOADING_SHOW, this.pause);\n    player.on(RPlayer.Events.LOADING_HIDE, this.update);\n    player.on(RPlayer.Events.PLAY, this.update);\n    player.on(RPlayer.Events.ENDED, this.pause);\n    player.on(RPlayer.Events.PLAYER_RESIZE, this.updateTunnel);\n    player.on(RPlayer.Events.SEEKED, this.onPlayerSeeked);\n\n    if (document.contains(this.player.dom)) {\n      this.run();\n    } else {\n      player.once(RPlayer.Events.MOUNTED, this.run);\n    }\n  }\n\n  private onPlayerSeeked = (): void => {\n    this.clear();\n    this.remain = this.opts.items;\n  };\n\n  updateTunnelHeight(h: number): void {\n    if (h && this.tunnelHeight < h) {\n      this.tunnelHeight = h;\n      this.updateTunnel();\n    }\n  }\n\n  private updateTunnel = (): void => {\n    if (!this.player) return;\n\n    const h = this.player.rect.height;\n    if (!h) return;\n\n    this.tunnel = ((this.area * h) / this.tunnelHeight) | 0;\n\n    const maxLen = Math.max(\n      this.last.length,\n      this.top.length,\n      this.bottom.length\n    );\n\n    if (maxLen > this.tunnel) {\n      for (let i = this.tunnel; i < maxLen; i++) {\n        this.recycleDan(this.last[i]);\n        this.recycleDan(this.top[i]);\n        this.recycleDan(this.bottom[i]);\n        this.last[i] = undefined;\n        this.top[i] = undefined;\n        this.bottom[i] = undefined;\n      }\n    }\n\n    this.current.forEach((item) => item.updateVertical());\n\n    if (this.tunnel < 1) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  updateArea(area: number): void {\n    if (!RPlayer.utils.isNum(area)) return;\n    this.unlimited = area > 1;\n    this.area = RPlayer.utils.clamp(area);\n    this.updateTunnel();\n  }\n\n  updateOpacity(opacity: number): void {\n    if (!RPlayer.utils.isNum(opacity)) return;\n    this.opacity = RPlayer.utils.clamp(opacity);\n    this.dom.style.opacity = this.opacity.toString();\n  }\n\n  updateFontSize(fontSize: number): void {\n    if (!RPlayer.utils.isNum(fontSize)) {\n      this.fontSize = this.getFontSize();\n    } else {\n      this.fontSize = fontSize;\n    }\n    if (!this.tunnelHeight) this.tunnelHeight = this.fontSize;\n    this.updateTunnel();\n    this.dom.style.fontSize = this.fontSize + 'px';\n  }\n\n  updateScrollFrame(scrollFrame?: number): void {\n    if (scrollFrame) this.opts.scrollFrame = scrollFrame;\n  }\n\n  updateStaticFrame(staticFrame?: number): void {\n    if (staticFrame) this.opts.staticFrame = staticFrame;\n  }\n\n  private getFontSize(): number {\n    const [w] = RPlayer.utils.getClientWH();\n    if (w < 769) return 15;\n    return 23;\n  }\n\n  hide(): void {\n    this.showing = false;\n    this.pause();\n    this.clear();\n  }\n\n  show(): void {\n    if (this.showing) return;\n    this.showing = true;\n    this.pause();\n    this.update();\n  }\n\n  clear(): void {\n    this.current.forEach((dan) => this.recycleDan(dan));\n    this.current = [];\n    this.last = [];\n    this.top = [];\n    this.bottom = [];\n  }\n\n  toggleBlockType(type: string): void {\n    if (!type) return;\n    if (this.opts.blockTypes.includes(type as any)) {\n      this.opts.blockTypes = this.opts.blockTypes.filter((x) => x !== type);\n      this.remain = this.opts.items;\n    } else {\n      this.opts.blockTypes.push(type as any);\n      this.remain = this.remain.filter((x) => x.type !== type);\n      this.current = this.current.filter((x) => {\n        if (x.type === type) {\n          this.recycleDan(x);\n          return false;\n        }\n\n        return true;\n      });\n    }\n  }\n\n  send(item: Item): void {\n    item.isMe = true;\n    this.opts.items.push(item);\n    this.insert(item, 0, true);\n  }\n\n  push(item: Item[] | Item): void {\n    if (!item) return;\n\n    if (Array.isArray(item)) {\n      this.opts.items.push(...item);\n\n      if (this.opts.blockTypes.length) {\n        item = item.filter((x) => !this.opts.blockTypes.includes(x.type));\n      }\n\n      this.remain.push(...item);\n    } else {\n      this.opts.items.push(item);\n      if (!this.opts.blockTypes.includes(item.type)) {\n        this.remain.push(item);\n      }\n    }\n  }\n\n  private getDan(\n    item: Item,\n    tunnel: number,\n    length?: number,\n    speed?: number\n  ): Dan {\n    const dan = this.pool.pop();\n    if (dan) return dan.reset(item, tunnel, length, speed);\n    return new Dan(this, item, tunnel, length, speed);\n  }\n\n  private recycleDan(dan: Dan): void {\n    if (!dan) return;\n    if (this.pool.length > 20) {\n      dan.destroy();\n    } else {\n      dan.recycle();\n      this.pool.push(dan);\n    }\n  }\n\n  private pause = (): void => {\n    cancelAnimationFrame(this.timer);\n    this.running = false;\n  };\n\n  private getShortestTunnel(): [number, number, number] {\n    let length = Infinity;\n    let tunnel = -1;\n    let speed = 0;\n    for (let i = 0; i < this.tunnel; i++) {\n      if (!this.last[i] || this.last[i].canRecycle) return [i, 0, 0];\n      const l = this.last[i].invisibleLength;\n      if (l < length) {\n        length = l;\n        tunnel = i;\n        speed = this.last[i].speed;\n      }\n    }\n    return [tunnel, length, speed];\n  }\n\n  private insert(item: Item, i = 0, force = false): void {\n    if (!item) return;\n    if (item.type === 'top' || item.type === 'bottom') {\n      let tunnel = -1;\n      for (let i = 0; i < this.tunnel; i++) {\n        if (!this[item.type][i] || this[item.type][i].canRecycle) {\n          tunnel = i;\n          break;\n        }\n      }\n      if (tunnel > -1) {\n        this[item.type][tunnel] = this.getDan(item, tunnel);\n        this.current.push(this[item.type][tunnel]);\n        item = undefined;\n      }\n    } else {\n      const [tunnel, length, speed] = this.getShortestTunnel();\n      if (length < 200) {\n        this.last[tunnel] = this.getDan(item, tunnel, length, speed);\n        this.current.push(this.last[tunnel]);\n        item = undefined;\n      }\n    }\n\n    if ((item && this.unlimited) || force) {\n      this.current.push(this.getDan(item, i % this.tunnel, i));\n    }\n  }\n\n  private load(): void {\n    if (\n      !this.showing ||\n      !this.player ||\n      !this.remain.length ||\n      this.tunnel < 1\n    ) {\n      return;\n    }\n\n    const time = this.player.currentTime | 0;\n    if (this.prevCurrentTime === time) return;\n    this.prevCurrentTime = time;\n\n    const remain: Item[] = [];\n    const toShow: Item[] = [];\n\n    this.remain.forEach((x) => {\n      if (x.time === time) {\n        toShow.push(x);\n      } else {\n        remain.push(x);\n      }\n    });\n\n    this.remain = remain;\n    if (!toShow.length) return;\n\n    for (let i = 0, l = toShow.length; i < l; i++) {\n      const item = toShow[i];\n      if (!item || !item.text) break;\n      this.insert(item, i);\n    }\n  }\n\n  private fire(): void {\n    this.current.forEach((dan) => dan.update());\n  }\n\n  private clean(): void {\n    const current: Dan[] = [];\n    this.current.forEach((dan) => {\n      if (dan.canRecycle) {\n        this.recycleDan(dan);\n      } else {\n        current.push(dan);\n      }\n    });\n    this.current = current;\n\n    for (let i = 0; i < this.tunnel; i++) {\n      if (this.last[i] && this.last[i].canRecycle) this.last[i] = undefined;\n      if (this.top[i] && this.top[i].canRecycle) this.top[i] = undefined;\n      if (this.bottom[i] && this.bottom[i].canRecycle) {\n        this.bottom[i] = undefined;\n      }\n    }\n  }\n\n  private update = (): void => {\n    if (this.running) return;\n    this.running = true;\n    this.render();\n  };\n\n  private render = (): void => {\n    this.load();\n    this.fire();\n    this.clean();\n\n    if (!this.current.length && !this.remain.length) return this.hide();\n    this.timer = requestAnimationFrame(this.render);\n  };\n\n  private run = (): void => {\n    this.updateTunnel();\n    this.show();\n    if (!this.player.playing) this.pause();\n  };\n}\n","import RPlayer from 'rplayer';\n\nexport interface Item {\n  text: string;\n  time: number;\n  color?: string;\n  fontFamily?: string;\n  type?: 'top' | 'bottom' | 'scroll';\n  isMe?: boolean;\n}\n\nexport interface DanmakuOpts {\n  items?: Item[];\n  area?: number;\n  opacity?: number;\n  fontSize?: number;\n  staticFrame?: number;\n  scrollFrame?: number;\n  blockTypes?: Item['type'][];\n}\n\nexport default function processOpts(opts: DanmakuOpts): DanmakuOpts {\n  opts.area = RPlayer.utils.isNum(opts.area) ? opts.area : 0.5;\n  opts.opacity = opts.opacity || 1;\n  opts.items = opts.items || [];\n  opts.staticFrame = opts.staticFrame || 300;\n  opts.scrollFrame = opts.scrollFrame || 500;\n  opts.blockTypes = opts.blockTypes || [];\n  return opts;\n}\n","import Danmaku from './danmaku';\nimport '../scss/index.scss';\n\nexport default Danmaku;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}"],"sourceRoot":""}