!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("RPlayer",[],e):"object"==typeof exports?exports.RPlayer=e():t.RPlayer=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=12)}([function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,i),p=o?o+e:e;return t._events[p]?t._events[p].fn?t._events[p]=[t._events[p],s]:t._events[p].push(s):(t._events[p]=s,t._eventsCount++),t}function p(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},l.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,r,i,a){var s=o?o+t:t;if(!this._events[s])return!1;var p,l,c=this._events[s],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,i),!0;case 6:return c.fn.call(c.context,e,n,r,i,a),!0}for(l=1,p=new Array(u-1);l<u;l++)p[l-1]=arguments[l];c.fn.apply(c.context,p)}else{var d,f=c.length;for(l=0;l<f;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!p)for(d=1,p=new Array(u-1);d<u;d++)p[d-1]=arguments[d];c[l].fn.apply(c[l].context,p)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var i=o?o+t:t;if(!this._events[i])return this;if(!e)return p(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||p(this,i);else{for(var s=0,l=[],c=a.length;s<c;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[i]=1===l.length?l[0]:l:p(this,i)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&p(this,e)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=o,l.EventEmitter=l,t.exports=l},function(t,e){t.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M1 12h3.6l-4 4L2 17.4l4-4V17h2v-7H1zM16 .6l-4 4V1h-2v7h7V6h-3.6l4-4z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 12.5l2.1-2.1 2.1 2.1 1.4-1.4L15.9 9 18 6.9l-1.4-1.4-2.1 2.1-2.1-2.1L11 6.9 13.1 9 11 11.1zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zM12 1c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M15.562 8.1L3.87.225C3.052-.337 2 .225 2 1.125v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M16.135 7.784a2 2 0 0 1-1.23-2.969c.322-.536.225-.998-.094-1.316l-.31-.31c-.318-.318-.78-.415-1.316-.094a2 2 0 0 1-2.969-1.23C10.065 1.258 9.669 1 9.219 1h-.438c-.45 0-.845.258-.997.865a2 2 0 0 1-2.969 1.23c-.536-.322-.999-.225-1.317.093l-.31.31c-.318.318-.415.781-.093 1.317a2 2 0 0 1-1.23 2.969C1.26 7.935 1 8.33 1 8.781v.438c0 .45.258.845.865.997a2 2 0 0 1 1.23 2.969c-.322.536-.225.998.094 1.316l.31.31c.319.319.782.415 1.316.094a2 2 0 0 1 2.969 1.23c.151.607.547.865.997.865h.438c.45 0 .845-.258.997-.865a2 2 0 0 1 2.969-1.23c.535.321.997.225 1.316-.094l.31-.31c.318-.318.415-.781.094-1.316a2 2 0 0 1 1.23-2.969c.607-.151.865-.547.865-.997v-.438c0-.451-.26-.846-.865-.997zM9 12a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="M15.6 3.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4C15.4 5.9 16 7.4 16 9c0 1.6-.6 3.1-1.8 4.3-.4.4-.4 1 0 1.4.2.2.5.3.7.3.3 0 .5-.1.7-.3C17.1 13.2 18 11.2 18 9s-.9-4.2-2.4-5.7z"></path><path d="M11.282 5.282a.909.909 0 0 0 0 1.316c.735.735.995 1.458.995 2.402 0 .936-.425 1.917-.995 2.487a.909.909 0 0 0 0 1.316c.145.145.636.262 1.018.156a.725.725 0 0 0 .298-.156C13.773 11.733 14.13 10.16 14.13 9c0-.17-.002-.34-.011-.51-.053-.992-.319-2.005-1.522-3.208a.909.909 0 0 0-1.316 0zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path></svg>'},function(t,e,n){var r=n(9),o=n(10);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1},a=(r(o,i),o.locals?o.locals:{});t.exports=a},function(t,e,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function s(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function p(t,e){for(var n={},r=[],o=0;o<t.length;o++){var i=t[o],p=e.base?i[0]+e.base:i[0],l=n[p]||0,c="".concat(p," ").concat(l);n[p]=l+1;var u=s(c),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(a[u].references++,a[u].updater(d)):a.push({identifier:c,updater:m(d,e),references:1}),r.push(c)}return r}function l(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,u=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function d(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=u(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function f(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var h=null,y=0;function m(t,e){var n,r,o;if(e.singleton){var i=y++;n=h||(h=l(e)),r=d.bind(null,n,i,!1),o=d.bind(null,n,i,!0)}else n=l(e),r=f.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=p(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=s(n[r]);a[o].references--}for(var i=p(t,e),l=0;l<n.length;l++){var c=s(n[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}n=i}}}},function(t,e,n){(e=n(11)(!1)).push([t.i,'.rplayer{position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Microsoft JhengHei,Microsoft YaHei,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#fff;font-size:14px;letter-spacing:1px;-webkit-tap-highlight-color:transparent}.rplayer [hidden]{display:none}.rplayer video{max-width:100%}.rplayer svg{width:18px;height:18px;fill:#fff}.rplayer-paused .rplayer_icon_pause,.rplayer_icon_exit_fullscreen,.rplayer_icon_play{display:none}.rplayer-paused .rplayer_icon_play{display:block}.rplayer-full video{width:100%}.rplayer-full .rplayer_icon_exit_fullscreen{display:block}.rplayer-full .rplayer_icon_enter_fullscreen{display:none}.rplayer_switch{width:36px;height:21px;padding:2px;border-radius:12px;background:hsla(0,0%,100%,.3);cursor:pointer}.rplayer_switch:after{content:"";display:block;width:21px;height:21px;border-radius:50%;background:#fff;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12);transition:transform .15s cubic-bezier(.4,0,.2,1),background-color .3s cubic-bezier(.4,0,.2,1) 0ms}.rplayer_switch-active:after{background:#448aff;transform:translateX(15px)}.rplayer_controls-hide{cursor:none}.rplayer_controls-hide .rplayer_controls_bottom,.rplayer_controls-hide .rplayer_controls_bottom_mask{opacity:0}.rplayer_controls_mask{position:absolute;left:0;right:0;top:0;bottom:0;z-index:1;pointer-events:none}.rplayer_controls-hide .rplayer_controls_mask{pointer-events:auto}.rplayer_controls_bottom{padding:7px;z-index:2;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rplayer_controls_bottom,.rplayer_controls_bottom_mask{position:absolute;left:0;right:0;bottom:0;transition:opacity .2s ease}.rplayer_controls_bottom_mask{top:55%;min-height:55px;background:linear-gradient(transparent,rgba(0,0,0,.5));pointer-events:none}.rplayer_controls_bottom_actions{display:flex;align-items:center}.rplayer_controls_bottom_actions>*{margin-left:3px}.rplayer_controls_bottom_actions>:first-child{margin-left:0}.rplayer_bar{position:absolute;left:0;right:0;top:0;bottom:0;transform-origin:0 0}.rplayer_dot{position:absolute;left:-6px;pointer-events:none}.rplayer_dot:after{content:"";display:block;width:12px;height:12px;border-radius:50%;background:#448aff;transform:scale(0);transition:transform .15s ease}.rplayer_progress{position:absolute;left:7px;right:7px;bottom:50px;cursor:pointer}.rplayer_progress_dot{top:-4px}.rplayer_progress_bar_wrapper{position:absolute;left:0;right:0;height:4px;background:hsla(0,0%,100%,.3)}.rplayer_progress_played{background:#448aff;transform:scaleX(0);will-change:transform}.rplayer_progress_buf{background:hsla(0,0%,100%,.5)}.rplayer_progress_pad{top:-8px;height:16px;touch-action:none;z-index:2}.rplayer_progress:active .rplayer_thumbnail,.rplayer_progress:hover .rplayer_thumbnail{opacity:1;transform:translate(-50%) scale(1)}.rplayer_progress:active .rplayer_progress_bar_wrapper,.rplayer_progress:hover .rplayer_progress_bar_wrapper{transform:scaleY(1.3)}.rplayer_progress:active .rplayer_progress_dot:after,.rplayer_progress:hover .rplayer_progress_dot:after{transform:scale(1)}.rplayer_thumbnail{position:absolute;left:0;bottom:10px;font-size:12px;opacity:0;transform:translate(-50%,10px) scale(.8);transition:transform .2s ease .1s,opacity .2s ease .1s;pointer-events:none}.rplayer_thumbnail_time{text-shadow:0 0 2px rgba(0,0,0,.3)}.rplayer_action_volume{display:flex;align-items:center}.rplayer_action_volume .rplayer_icon_muted{display:none}.rplayer_action_volume_icon-muted .rplayer_icon_muted{display:block}.rplayer_action_volume_icon-muted .rplayer_icon_volume{display:none}.rplayer_action_volume_progress{position:relative;width:60px;margin-left:3px;margin-right:6px;padding:4px 0;cursor:pointer}.rplayer_action_volume_progress:hover .rplayer_action_volume_dot:after{transform:scale(1)}.rplayer_action_volume_bar{background:hsla(0,0%,100%,.8)}.rplayer_action_volume_bar_wrapper{position:relative;height:4px;border-radius:3px;background:hsla(0,0%,100%,.3);overflow:hidden}.rplayer_action_volume_dot{top:0}.rplayer_action_volume_dot:after{background:hsla(0,0%,100%,.8)}.rplayer_action_time{font-size:13px;margin-left:8px;margin-right:auto;margin-top:-1px;text-shadow:0 0 2px rgba(0,0,0,.3);white-space:nowrap}.rplayer_action_time :first-child:after{content:"/";display:inline-block;font-size:12px;margin:0 5px;transform:translateY(-.5px)}.rplayer_action_setting svg{transition:transform .2s ease}.rplayer_action_setting-active{background:#448aff!important}.rplayer_action_setting-active svg{transform:rotate(90deg)}.rplayer_action_setting-active .rplayer_tooltip_text{opacity:0!important}.rplayer_action_setting-active .rplayer_settings_menu{opacity:1;transform:translateY(0);pointer-events:auto}.rplayer_action_setting-active .rplayer_action_setting_mask{display:block}.rplayer_action_setting_mask{display:none;position:fixed;left:0;right:0;top:0;bottom:0;z-index:3;cursor:default}.rplayer .rplayer_tray{padding:7px;border-radius:3px;transition:background .3s ease;font-size:0;cursor:pointer}.rplayer .rplayer_tray:hover{background:#448aff}.rplayer_tooltip{position:relative;display:inline-block}.rplayer_tooltip:hover .rplayer_tooltip_text{opacity:1;transform:translate(-50%)}.rplayer_tooltip:hover .rplayer_tooltip_text-left,.rplayer_tooltip:hover .rplayer_tooltip_text-right{transform:translate(0)}.rplayer_tooltip_text{position:absolute;left:50%;bottom:100%;font-size:12px;margin-bottom:15px;padding:5px 10px;border-radius:3px;white-space:nowrap;background:rgba(0,0,0,.7);transform:translate(-50%,10px) scale(.8);transform-origin:50% 100%;pointer-events:none;opacity:0;transition:transform .2s ease .1s,opacity .2s ease .1s}.rplayer_tooltip_text-left{left:0;transform:translateY(10px) scale(.8);transform-origin:0 100%}.rplayer_tooltip_text-right{left:auto;right:0;transform:translateY(10px) scale(.8);transform-origin:100% 100%}.rplayer_settings_menu{position:absolute;bottom:100%;right:0;border-radius:3px;margin-bottom:15px;font-size:14px;background:rgba(0,0,0,.7);white-space:nowrap;opacity:0;transform:translateY(10px);z-index:5;pointer-events:none;transition:opacity .2s ease,transform .2s ease,height .2s cubic-bezier(.4,0,.2,1),width .2s cubic-bezier(.4,0,.2,1);overflow:hidden;will-change:width,height}.rplayer_settings_menu_page .rplayer_settings_menu_page_back{justify-content:flex-start;border-bottom:1px solid hsla(0,0%,100%,.2)}.rplayer_settings_menu_page .rplayer_settings_menu_page_back:before{content:"";display:block;width:0;height:0;margin-right:21px;border:4px solid transparent;border-right-color:#fff}.rplayer_settings_menu_item{display:flex;align-items:center;justify-content:space-between;padding:8px 20px}.rplayer_settings_menu_item:hover{background:hsla(0,0%,100%,.2)}.rplayer_settings_menu_item :first-child{padding-right:50px;margin-right:auto}.rplayer_settings_menu_radio:after{content:"";display:block;width:0;height:0;margin-left:10px;border:4px solid transparent;border-left-color:#fff}.rplayer_settings_radio_option{position:relative;justify-content:flex-start}.rplayer_settings_radio_option:before{content:"";display:block;opacity:0;height:5px;width:12px;border-color:transparent transparent #fff #fff;border-style:solid;border-width:1px;margin-right:15px;margin-top:-5px;transform:rotate(-45deg)}.rplayer_settings_radio_option-active:before{opacity:1}',""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),p="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(p," */")),i=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(i).concat([o]).join("\n")}var a,s,p;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var p=[].concat(t[s]);r&&o[p[0]]||(n&&(p[2]?p[2]="".concat(n," and ").concat(p[2]):p[2]=n),e.push(p))}},e}},function(t,e,n){"use strict";n.r(e);n(8);var r=n(0),o=function(){function t(t,e,n,r){var o=this;this.pending=!1,this.downHandler=function(t){t.preventDefault(),o.dom.setPointerCapture(t.pointerId),o.dom.addEventListener("pointermove",o.moveHandler,!0),o.start(t)},this.moveHandler=function(t){t.preventDefault(),o.lastEv=t,o.pending||(o.pending=!0,requestAnimationFrame(o.handlerMove))},this.handlerMove=function(){o.move(o.lastEv),o.pending=!1},this.upHandler=function(t){t.preventDefault(),o.dom.releasePointerCapture(t.pointerId),o.dom.removeEventListener("pointermove",o.moveHandler,!0),o.end&&o.end(t)},this.dom=t,this.start=e,this.move=n,this.end=r,t.addEventListener("pointerdown",this.downHandler,!0),t.addEventListener("pointerup",this.upHandler,!0),t.addEventListener("pointercancel",this.upHandler,!0)}return t.prototype.destroy=function(){this.dom.removeEventListener("pointerdown",this.downHandler,!0),this.dom.removeEventListener("pointerup",this.upHandler,!0),this.dom.removeEventListener("pointercancel",this.upHandler,!0),this.dom.removeEventListener("pointermove",this.moveHandler,!0)},t}();function i(){}function a(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),Math.max(Math.min(t,n),e)}function s(t){return"string"==typeof t}function p(t){return"function"==typeof t}function l(t){return"object"==typeof t}function c(t,e){if(t.findIndex)return t.findIndex(e);for(var n=0,r=t.length;n<r;n++)if(e(t[n],n,t))return n;return-1}function u(t,e){var n=t;return"string"==typeof t&&(n=document.querySelector(t)),n||(p(e)?e():e)}function d(t,e){void 0===e&&(e="span");var n=document.createElement(e);return n.innerHTML=t,n}function f(t){return void 0===t&&(t="div"),document.createElement(t)}var h=window.DOMParser?new DOMParser:null;function y(t,e){var n=function(t,e){return void 0===e&&(e="image/svg+xml"),h.parseFromString(t,e).firstChild}(t);return e&&(n.classList?n.classList.add(e):n.setAttribute("class",e)),n}function m(t,e,n){if(void 0===e&&(e=2),void 0===n&&(n="0"),(t=String(t)).length>=2)return t;for(var r=0,o=e-t.length;r<o;r++)t=n+t;return t}function _(t){return!t||t<0?"0:00":(t=Math.round(t))<60?"0:"+m(t):t<3600?Math.floor(t/60)+":"+m(t%60):Math.floor(t/3600)+":"+m(Math.floor(t%3600/60))+":"+m(t%60)}var v,g,b=/(iPad|iPhone|iPod)/gi.test(navigator.platform),C=(v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),w=function(t){function e(e,n){var r=t.call(this)||this;return e&&!s(e)&&(r.player=e,n&&n.forEach((function(t){var n="on"+t;p(r[n])&&e.on(t,r[n].bind(r))}))),r}return C(e,t),e}(r.EventEmitter);!function(t){t.BEFORE_MOUNT="BeforeMount",t.MOUNTED="Mounted",t.RESIZE="Resize",t.CONTROLS_SHOW="ControlsShow",t.CONTROLS_HIDE="ControlsHide",t.ENTER_FULLSCREEN="EnterFullscreen",t.EXIT_FULLSCREEN="ExitFullscreen",t.DURATION_CHANGE="DurationChange",t.TIME_UPDATE="TimeUpdate",t.VOLUME_CHANGE="VolumeChange",t.PLAY="Play",t.PAUSE="Pause",t.ENDED="Ended",t.PROGRESS="Progress"}(g||(g={}));var x=g,E=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(t){function e(e,n){var r=void 0===n?{}:n,o=r.dom,i=void 0===o?"div":o,a=r.events,p=r.autoUpdateRect,l=void 0!==p&&p,c=t.call(this,e,a)||this;return c._resizeHandler=function(){c.updateRect()},c.dom=s(i)?f(i):i,e&&l&&e.on(x.RESIZE,c._resizeHandler),c}return E(e,t),Object.defineProperty(e.prototype,"rect",{get:function(){return this._rect||(this._rect=this.dom.getBoundingClientRect()),this._rect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.dom.innerText},set:function(t){this.dom.innerText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.dom.innerHTML},set:function(t){this.dom.innerHTML=t},enumerable:!0,configurable:!0}),e.prototype.updateRect=function(){this._rect=this.dom.getBoundingClientRect()},e.prototype.addStyle=function(t){var e=this;s(t)?this.dom.style.cssText=t:Object.keys(t).forEach((function(n){e.dom.style[n]=t[n]}))},e.prototype.appendChild=function(t){this.dom.appendChild(e.isComponent(t)?t.dom:t)},e.prototype.insert=function(t,n){this.dom.insertBefore(e.isComponent(t)?t.dom:t,this.dom.children[n])},e.prototype.removeChild=function(t){this.dom.removeChild(e.isComponent(t)?t.dom:t)},e.prototype.addClass=function(t){var e=this;t.split(" ").forEach((function(t){e.dom.classList.add(t)}))},e.prototype.containsClass=function(t){return this.dom.classList.contains(t)},e.prototype.toggleClass=function(t,e){this.dom.classList.toggle(t,e)},e.prototype.removeClass=function(t){this.dom.classList.remove(t)},e.prototype.appendTo=function(t){t.appendChild(this.dom)},e.prototype.removeFrom=function(t){t.removeChild(this.dom)},e.prototype.removeFromParent=function(){this.dom.parentNode.removeChild(this.dom)},e.prototype.hidden=function(){this.dom.hidden=!0},e.prototype.visible=function(){this.dom.hidden=!1},e.isComponent=function(t){return t instanceof e},e}(w),L=n(1),P=n.n(L),T=n(2),k=n.n(T),H=n(3),M=n.n(H),S=n(4),j=n.n(S),R=n(5),A=n.n(R),F=n(6),B=n.n(F),N=n(7),z=n.n(N),U={play:y(A.a,"rplayer_icon_play"),pause:y(j.a,"rplayer_icon_pause"),enterFullscreen:y(P.a,"rplayer_icon_enter_fullscreen"),exitFullscreen:y(k.a,"rplayer_icon_exit_fullscreen"),volume:y(z.a,"rplayer_icon_volume"),muted:y(M.a,"rplayer_icon_muted"),settings:y(B.a)},D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=function(t){function e(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=t.call(this,e,{events:n})||this;return o.tip=f(),o.__onclick=function(t){t.preventDefault(),o.onClick(t)},o.addClass("rplayer_tooltip rplayer_tray"),o.tip.classList.add("rplayer_tooltip_text"),o.dom.addEventListener("click",o.__onclick),o.appendChild(o.tip),o}return D(e,t),e.prototype.setLeft=function(){this.tip.classList.add("rplayer_tooltip_text-left")},e.prototype.setRight=function(){this.tip.classList.add("rplayer_tooltip_text-right")},e.prototype.changeTipText=function(t){this.tip.innerText=t},e}(O),I=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(t){function e(e){var n=t.call(this,e,x.ENTER_FULLSCREEN,x.EXIT_FULLSCREEN)||this;return n.changeTipText("全屏"),n.setRight(),n.appendChild(U.enterFullscreen),n.appendChild(U.exitFullscreen),n}return I(e,t),e.prototype.onClick=function(){this.player.fullscreen.toggle()},e.prototype.onEnterFullscreen=function(){this.changeTipText("退出全屏")},e.prototype.onExitFullscreen=function(){this.changeTipText("全屏")},e}(V),W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(t){function e(e){var n=t.call(this,e,x.PLAY,x.PAUSE)||this;return n.changeTipText("播放"),n.setLeft(),n.appendChild(U.play),n.appendChild(U.pause),n}return W(e,t),e.prototype.onClick=function(){this.player.toggle()},e.prototype.onPlay=function(){this.changeTipText("暂停")},e.prototype.onPause=function(){this.changeTipText("播放")},e}(V),Y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(t){function e(e,n){var r=t.call(this)||this;return r.optionClickHandler=function(t){return function(e){e.preventDefault(),e.stopPropagation(),r.value!==t&&(p(r.opts.onChange)?r.opts.onChange(r.opts.options[t],r.select.bind(r,t)):r.select(t))}},r.opts=e,r.onEntryClick=n,r.options=e.options.map((function(t,e){var n=f();return n.innerHTML=t.html||t.label,n.addEventListener("click",r.optionClickHandler(e),!0),n.classList.add("rplayer_settings_menu_item"),n.classList.add("rplayer_settings_radio_option"),n})),r.options.forEach((function(t){return r.appendChild(t)})),r.value=e.defaultValue||0,r.entry=f(),r.entry.classList.add("rplayer_settings_menu_radio"),r.entry.classList.add("rplayer_settings_menu_item"),r.entryLabel=d(e.label),r.entryValue=f("span"),r.select(r.value),r.entry.appendChild(r.entryLabel),r.entry.appendChild(r.entryValue),r.entry.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),p(r.onEntryClick)&&r.onEntryClick(r)}),!0),r}return Y(e,t),e.prototype.select=function(t){var e=this.options[t];if(e){this.prevSelect&&this.prevSelect.classList.remove("rplayer_settings_radio_option-active");var n=this.opts.options[t];this.entryValue.innerHTML=n.selected||n.label,e.classList.add("rplayer_settings_radio_option-active"),this.value=t,this.prevSelect=e}},e}(O),J=function(t){var e=this;this.activeClass="rplayer_switch-active",this.entryClickHandler=function(t){t.preventDefault(),t.stopPropagation(),p(e.opts.onChange)?e.opts.onChange(!e.value,e.doSwitch):e.doSwitch()},this.doSwitch=function(){e.value=!e.value,e.value?e.entryValue.classList.add(e.activeClass):e.entryValue.classList.remove(e.activeClass)},this.opts=t,this.entryLabel=d(t.label),this.entryValue=f(),this.entryValue.classList.add("rplayer_switch"),this.entry=f(),this.entry.classList.add("rplayer_settings_menu_item"),this.entry.appendChild(this.entryLabel),this.entry.appendChild(this.entryValue),this.entry.addEventListener("click",this.entryClickHandler,!0),this.value=!t.defaultValue,this.doSwitch()},Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(t){function e(e){var n=t.call(this,e,{events:[x.MOUNTED]})||this;n.optionRects=[],n.radioEntryClickHandler=function(t){return function(){n.homeRect||(n.homeRect=n.dom.getBoundingClientRect()),n.homePage.hidden=!0,n.optionPages[t].hidden=!1,n.optionRects[t]||(n.optionRects[t]=function(t){var e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity="0",e.removeAttribute("hidden"),t.parentNode.appendChild(e);var n=e.scrollWidth,r=e.scrollHeight;return t.parentNode.removeChild(e),{width:n,height:r}}(n.optionPages[t])),n.setWH(n.optionRects[t].width,n.optionRects[t].height)}},n.backClickHandler=function(t){t.preventDefault(),t.stopPropagation(),n.resetPage()},n.addClass("rplayer_settings_menu");var r=-1;return n.items=n.player.options.settings.map((function(t){return t.options?(r++,new G(t,n.radioEntryClickHandler(r))):new J(t)})),n.homePage=n.getHomePage(),n.optionPages=n.items.map((function(t){return n.getOptionPage(t)})).filter((function(t){return t})),n.appendChild(n.homePage),n.optionPages.forEach((function(t){return n.appendChild(t)})),n}return Z(e,t),e.prototype.setWH=function(t,e){this.addStyle({width:t?t+"px":"",height:e?e+"px":""})},e.prototype.getBack=function(t){var e=f();return e.classList.add("rplayer_settings_menu_page_back"),e.classList.add("rplayer_settings_menu_item"),e.innerHTML=t,e.addEventListener("click",this.backClickHandler,!0),e},e.prototype.getHomePage=function(){if(this.homePage)return this.homePage;var t=f();return this.items.forEach((function(e){t.appendChild(e.entry)})),t.classList.add("rplayer_settings_menu_page"),t},e.prototype.getOptionPage=function(t){if(!(t instanceof G))return null;var e=f();e.classList.add("rplayer_settings_menu_page");var n=this.getBack(t.opts.label);return e.appendChild(n),e.appendChild(t.dom),e.hidden=!0,e},e.prototype.resetPage=function(){this.optionPages.forEach((function(t){t.hidden=!0})),this.homePage.hidden=!1,this.homeRect&&this.setWH(this.homeRect.width,this.homeRect.height)},e.prototype.onMounted=function(){this.homeRect||(this.homeRect=this.dom.getBoundingClientRect()),this.setWH(this.homeRect.width,this.homeRect.height)},e}(O),Q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$=function(t){function e(e){var n=t.call(this,e)||this;return n.mask=f(),n.activeClass="rplayer_action_setting-active",n.maskClickHandler=function(t){t.preventDefault(),t.stopPropagation(),n.removeClass(n.activeClass),clearTimeout(n.resetPageTimer),n.resetPageTimer=setTimeout((function(){n.menu.resetPage()}),500)},n.addClass("rplayer_action_setting"),n.changeTipText("设置"),n.menu=new K(e),n.mask.classList.add("rplayer_action_setting_mask"),n.mask.addEventListener("click",n.maskClickHandler,!0),n.appendChild(U.settings),n.appendChild(n.menu),n.appendChild(n.mask),n}return Q(e,t),e.prototype.onClick=function(){this.addClass(this.activeClass)},e}(V),tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(t){function e(e){var n=t.call(this,e,{events:[x.DURATION_CHANGE,x.TIME_UPDATE,x.CONTROLS_SHOW]})||this;return n.curTime=f("span"),n.totalTime=f("span"),n.addClass("rplayer_action_time"),n.updateCurTime(),n.updateTotalTime(),n.appendChild(n.curTime),n.appendChild(n.totalTime),n}return tt(e,t),e.prototype.updateCurTime=function(){this.player.controls&&this.player.controls.isHide||(this.curTime.innerText=_(this.player.currentTime))},e.prototype.updateTotalTime=function(){this.totalTime.innerText=_(this.player.duration)},e.prototype.onTimeUpdate=function(){this.updateCurTime()},e.prototype.onDurationChange=function(){this.updateTotalTime()},e.prototype.onControlsShow=function(){this.updateCurTime()},e}(O),nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rt=function(t){function e(e,n){var r=t.call(this)||this;return r.addClass("rplayer_bar"),e&&r.addClass(e),n&&r.addStyle(n),r}return nt(e,t),e.prototype.setX=function(t){this.addStyle({transform:"scaleX("+a(t)+")"})},e}(O),ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(t){function e(e,n){var r=t.call(this)||this;return r.addClass("rplayer_dot"),e&&r.addClass(e),n&&r.addStyle(n),r}return ot(e,t),e.prototype.setX=function(t){this.addStyle({transform:"translateX("+t+"px)"})},e}(O),at=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),st=function(t){function e(e){var n=t.call(this,e)||this;return n.mutedClass="rplayer_action_volume_icon-muted",n.appendChild(U.volume),n.appendChild(U.muted),n.update(),n}return at(e,t),e.prototype.update=function(){this.player.muted()?(this.addClass(this.mutedClass),this.changeTipText("取消静音")):(this.removeClass(this.mutedClass),this.changeTipText("静音"))},e.prototype.onClick=function(){this.player.toggleVolume()},e.prototype.onVolumeChange=function(){this.player.muted()&&this.containsClass(this.mutedClass)||this.update()},e}(V),pt=function(t){function e(e){var n=t.call(this,e)||this;n.dragStartHandler=function(t){n.player.controls.requireShow(),n.dragHandler(t)},n.dragHandler=function(t){n.player.volume((t.pageX-n.rect.left)/n.rect.width)},n.dragEndHandler=function(){n.player.controls.releaseShow()},n.addClass("rplayer_action_volume_progress"),n.bar=new rt("rplayer_action_volume_bar"),n.dot=new it("rplayer_action_volume_dot");var r=f();return r.classList.add("rplayer_action_volume_bar_wrapper"),r.appendChild(n.bar.dom),n.appendChild(r),n.appendChild(n.dot),n.drag=new o(n.dom,n.dragStartHandler,n.dragHandler,n.dragEndHandler),n}return at(e,t),e.prototype.destroy=function(){this.drag.destroy()},e.prototype.onVolumeChange=function(){var t=this.player.volume();this.bar.setX(t),this.dot.setX(this.rect.width*t)},e.prototype.onMounted=function(){this.onVolumeChange()},e}(O),lt=function(t){function e(e){var n=t.call(this,e,{events:[x.VOLUME_CHANGE,x.MOUNTED]})||this;return n.addClass("rplayer_action_volume"),n.icon=new st(e),n.progress=new pt(e),n.appendChild(n.icon),n.appendChild(n.progress),n}return at(e,t),e.prototype.onVolumeChange=function(){this.icon.onVolumeChange(),this.progress.onVolumeChange()},e.prototype.onMounted=function(){this.progress.onMounted()},e}(O),ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut=function(t){function e(e){var n=t.call(this,e)||this;return n.addClass("rplayer_controls_bottom_actions"),n.appendChild(new q(e)),n.appendChild(new lt(e)),n.appendChild(new et(e)),n.appendChild(new $(e)),n.appendChild(new X(e)),n}return ct(e,t),e.prototype.addAction=function(t,e){this.insert(t,e)},e}(O),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(t){function e(e,n){var r=t.call(this,e)||this;return r.addClass("rplayer_thumbnail"),r.progressBar=n,r.time=document.createElement("div"),r.time.classList.add("rplayer_thumbnail_time"),r.appendChild(r.time),r}return dt(e,t),e.prototype.update=function(t,e){this.time.innerText=_(e);var n=this.rect.width/2;this.addStyle({left:a(t,n,this.progressBar.rect.width-n)+"px"})},e}(O),ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yt=function(t){function e(e){var n=t.call(this,e,{events:[x.TIME_UPDATE,x.PROGRESS,x.CONTROLS_SHOW],autoUpdateRect:!0})||this;return n.mouseMovePending=!1,n.mouseMoveLastX=0,n.dragging=!1,n.dragStartHandler=function(t){n.player.pause(),n.dragging=!0,n.dragHandler(t)},n.dragHandler=function(t){var e=t.pageX-n.rect.left;n.dot.setX(a(e,0,n.rect.width)),n.playedBar.setX(e/n.rect.width),n.mouseMoveLastX=t.pageX,n.updateThumbnail()},n.dragEndHandler=function(t){n.dragging=!1,n.player.seek(n.calcCurrentTime(t.pageX)),n.player.play()},n.mouseMoveHandler=function(t){t.preventDefault(),n.mouseMoveLastX=t.pageX,n.mouseMovePending||(n.mouseMovePending=!0,requestAnimationFrame(n.updateThumbnail))},n.updateRect=function(){n._rect=n.dom.getBoundingClientRect(),n.updatePlayedBar()},n.updateThumbnail=function(){n.thumbnail.update(n.mouseMoveLastX-n.rect.left,n.calcCurrentTime(n.mouseMoveLastX)),n.mouseMovePending=!1},n.addClass("rplayer_progress"),n.barWrapper=f(),n.barWrapper.classList.add("rplayer_progress_bar_wrapper"),n.bufBar=new rt("rplayer_progress_buf"),n.playedBar=new rt("rplayer_progress_played"),n.padBar=new rt("rplayer_progress_pad"),n.dot=new it("rplayer_progress_dot"),n.thumbnail=new ft(e,n),n.drag=new o(n.padBar.dom,n.dragStartHandler,n.dragHandler,n.dragEndHandler),n.padBar.dom.addEventListener("mousemove",n.mouseMoveHandler,!0),n.barWrapper.appendChild(n.bufBar.dom),n.barWrapper.appendChild(n.playedBar.dom),n.barWrapper.appendChild(n.padBar.dom),n.appendChild(n.barWrapper),n.appendChild(n.dot),n.appendChild(n.thumbnail),n}return ht(e,t),e.prototype.calcCurrentTime=function(t){return(t-this.rect.left)/this.rect.width*this.player.duration},e.prototype.updatePlayedBar=function(){if(!this.player.controls.isHide){var t=this.player.currentTime/this.player.duration;this.dot.setX(this.rect.width*t),this.playedBar.setX(t)}},e.prototype.updateBufBar=function(){if(!this.player.controls.isHide){var t=this.player.buffered.length;if(!t)return this.bufBar.setX(0);for(var e=this.player.currentTime,n=0,r=t-1;r>=0;r--){var o=this.player.buffered.end(r);if(this.player.buffered.start(r)<=e&&o>=e){n=o/this.player.duration;break}}this.bufBar.setX(n)}},e.prototype.onControlsShow=function(){this.updatePlayedBar(),this.updateBufBar()},e.prototype.onTimeUpdate=function(){this.dragging||this.updatePlayedBar()},e.prototype.onProgress=function(){this.updateBufBar()},e.prototype.destroy=function(){this.drag.destroy()},e}(O),mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_t=function(t){function e(e){var n=t.call(this,e,{events:[x.BEFORE_MOUNT]})||this;return n.addClass("rplayer_controls_bottom"),n.progressBar=new yt(e),n.actions=new ut(e),n.mask=f(),n.mask.classList.add("rplayer_controls_bottom_mask"),n.appendChild(n.progressBar),n.appendChild(n.actions),n}return mt(e,t),e.prototype.onBeforeMount=function(){this.player.controls.appendChild(this.mask)},e}(O),vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(t){function e(e){var n=t.call(this,e,{events:[x.PLAY,x.PAUSE]})||this;return n.hideClass="rplayer_controls-hide",n.showLatch=0,n.delayHide=function(t){t&&t.preventDefault(),n.show(),clearTimeout(n.controlsTimer),n.controlsTimer=setTimeout(n.tryHideControls,3e3)},n.tryHideControls=function(t){t&&t.preventDefault();var e=n.player.media;!e.played.length||e.paused||n.showLatch||n.hide()},n.addClass("rplayer_controls"),n.mask=f(),n.mask.classList.add("rplayer_controls_mask"),n.bottom=new _t(e),n.appendChild(n.mask),n.appendChild(n.bottom),n.initEvents(),n}return vt(e,t),Object.defineProperty(e.prototype,"isHide",{get:function(){return this.containsClass(this.hideClass)},enumerable:!0,configurable:!0}),e.prototype.initEvents=function(){var t=this.player.dom;t.addEventListener("mousemove",this.delayHide),t.addEventListener("mouseleave",this.tryHideControls),t.addEventListener("click",this.delayHide)},e.prototype.requireShow=function(){this.showLatch++},e.prototype.releaseShow=function(){this.showLatch--,this.showLatch<0&&(this.showLatch=0)},e.prototype.show=function(){this.isHide&&(this.removeClass(this.hideClass),this.player.emit(x.CONTROLS_SHOW))},e.prototype.hide=function(){this.isHide||(this.addClass(this.hideClass),this.player.emit(x.CONTROLS_HIDE))},e.prototype.onPlay=function(){this.delayHide()},e.prototype.onPause=function(){this.show()},e}(O),bt=function(){function t(t){var e=this;this.prefix=this.getPrefix(),this.changeHandler=function(){e.player.emit(e.isActive?x.ENTER_FULLSCREEN:x.EXIT_FULLSCREEN)},this.player=t,document.addEventListener("ms"===this.prefix?"MSFullscreenChange":this.prefix+"fullscreenchange",this.changeHandler)}return t.prototype.getPrefix=function(){if(p(document.exitFullscreen))return"";var t="";return["webkit","moz","ms"].forEach((function(e){(p(document[e+"ExitFullscreen"])||p(document[e+"CancelFullScreen"]))&&(t=e)})),t},Object.defineProperty(t.prototype,"requestFullscreen",{get:function(){return HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.msRequestFullscreen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exitFullscreen",{get:function(){return HTMLDocument.prototype.exitFullscreen||HTMLDocument.prototype.webkitExitFullscreen||HTMLDocument.prototype.cancelFullScreen||HTMLDocument.prototype.mozCancelFullScreen||HTMLDocument.prototype.msExitFullscreen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return b?this.player.media:this.player.dom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this.fullscreenElement===this.target},enumerable:!0,configurable:!0}),t.prototype.enter=function(){b?this.target.webkitEnterFullscreen():this.requestFullscreen.call(this.target,{navigationUI:"hide"})},t.prototype.exit=function(){b?this.target.webkitExitFullscreen():this.exitFullscreen.call(document)},t.prototype.toggle=function(){this.isActive?this.exit():this.enter()},t}();function Ct(t,e,n,r){e.addEventListener(n,(function(){return t.emit(r)}))}function wt(t,e,n,r){var o=!1;e.addEventListener(n,(function(){o||(o=!0,requestAnimationFrame((function(){t.emit(r),o=!1})))}))}var xt=function(t,e){Ct(t,e,"durationchange",x.DURATION_CHANGE),Ct(t,e,"play",x.PLAY),Ct(t,e,"pause",x.PAUSE),Ct(t,e,"ended",x.ENDED),wt(t,e,"timeupdate",x.TIME_UPDATE),wt(t,e,"volumechange",x.VOLUME_CHANGE),wt(t,e,"progress",x.PROGRESS)},Et=function(){return(Et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ot={steps:[{label:"0.5x",value:.5},{label:"0.75x",value:.75},{label:"正常",value:1},{label:"1.25x",value:1.25},{label:"1.5x",value:1.5},{label:"1.75x",value:1.75},{label:"2x",value:2}]};var Lt=function(t,e){return(e=e?Et({},e):{}).settings=e.settings||[],e.preset=e.preset||{},e=function(t,e){if(!1===e.preset.playbackRate)return e;var n=l(e.preset.playbackRate)&&e.preset.playbackRate.steps?e.preset.playbackRate:Ot,r={label:"速度",defaultValue:2,options:n.steps,onChange:function(e,n){t.playbackRate(e.value),n()}},o="number"==typeof n.position?n.position:c(e.settings,(function(t){return t.options}));return o<0&&(o=0),e.settings.splice(o,0,r),e}(t,e)},Pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tt=function(t){function e(e){var n=t.call(this)||this;return n.resizePending=!1,n.prevVolume=1,n.fullscreenClass="rplayer-full",n.pausedClass="rplayer-paused",n.resizeHandler=function(){n.emit(x.RESIZE),n.resizePending=!1},n.options=Lt(n,e),n.addClass("rplayer"),n.media=u(n.options.media,(function(){return f("video")})),n.el=u(n.options.el,(function(){return document.body})),n.prevVolume=n.media.volume,n.options.video&&n.setMediaAttrs(n.options.video),xt(n,n.media),n.fullscreen=new bt(n),n.controls=new gt(n),n.initFullscreen(),n.initClassName(),n.initInteraction(),n}return Pt(e,t),e.prototype.initFullscreen=function(){var t=this;this.fullscreen.isActive&&this.addClass(this.fullscreenClass),this.on(x.ENTER_FULLSCREEN,(function(){t.addClass(t.fullscreenClass)})).on(x.EXIT_FULLSCREEN,(function(){t.removeClass(t.fullscreenClass)})),this.dom.addEventListener("dblclick",(function(e){e.preventDefault(),t.controls.bottom.dom.contains(e.target)||t.fullscreen.toggle()}),!0)},e.prototype.initClassName=function(){var t=this;this.paused&&this.addClass(this.pausedClass),this.on(x.PLAY,(function(){return t.removeClass(t.pausedClass)})).on(x.PAUSE,(function(){return t.addClass(t.pausedClass)}))},e.prototype.initInteraction=function(){var t=this;this.dom.addEventListener("click",(function(e){e.preventDefault(),t.controls.bottom.dom.contains(e.target)||t.toggle()})),window.addEventListener("resize",(function(){t.resizePending||(t.resizePending=!0,requestAnimationFrame(t.resizeHandler))}))},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this.media.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this.media.buffered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.media.paused},enumerable:!0,configurable:!0}),e.prototype.setMediaAttrs=function(t){var e=this;Object.keys(t).forEach((function(n){var r=t[n];"src"===n?s(r)?e.media.src=r:Array.isArray(r)&&r.forEach((function(t){return e.media.canPlayType(t)&&(e.media.src=t)})):e.media[n]=r}))},e.prototype.mount=function(t){t&&(this.el=t),this.appendChild(this.controls),this.emit(x.BEFORE_MOUNT),this.appendChild(this.media),this.el.appendChild(this.dom),this.emit(x.MOUNTED)},e.prototype.seek=function(t){this.media.currentTime=a(t,0,this.duration)},e.prototype.play=function(){var t,e=this.media.play();l(t=e)&&p(t.catch)&&e.catch(i)},e.prototype.pause=function(){this.media.pause()},e.prototype.toggle=function(){this.paused?this.play():this.pause()},e.prototype.volume=function(t){return null!=t&&(this.media.volume=a(t)),this.media.volume},e.prototype.muted=function(t){return null!=t&&(this.media.muted=t),this.media.muted||0===this.volume()},e.prototype.toggleVolume=function(){this.muted()?(this.volume(this.prevVolume),this.muted(!1)):(this.prevVolume=this.volume(),this.volume(0))},e.prototype.playbackRate=function(t){return null!=t&&(this.media.playbackRate=t),this.media.playbackRate},e.Events=x,e}(O);e.default=Tt}]).default}));
//# sourceMappingURL=RPlayer.js.map